(this.webpackJsonpcft=this.webpackJsonpcft||[]).push([[0],{19:function(e,t,n){e.exports=n(33)},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(4),s=n.n(r),c=n(5),u=n(2),l={countries:[],showCountriesList:!1,selectedCountry:"",selectedCountryCode:"",selectedCountryPrefix:"",selectedCountryMin:"",selectedCountryMax:"",inputValue:"+",loading:!0,error:!1,showPopUp:!1,showMessage:!1,alertMessage:" "},i=Object(u.c)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_FORM":return;default:return e}}}),d=n(12),f=Object(u.d)(i,Object(u.a)(d.a)),p=n(9),C=n.n(p),h=n(13),m=n(14),g=n(15),y=n(17),v=n(16),w=n(18),x=(n(30),n(31),function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=Object(y.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={countries:[],showCountriesList:!1,selectedCountry:"",selectedCountryCode:"",selectedCountryPrefix:"",selectedCountryMin:"",selectedCountryMax:"",inputValue:"+",loading:!0,error:!1,showPopUp:!1,showMessage:!1,alertMessage:" "},n.getCountries=Object(h.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://koronapay.com/online/api/countries");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch, received ".concat(t.status));case 5:return e.next=7,t.json();case 7:return n=e.sent,console.log(n),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),n.onCountriesLoaded=function(e){var t=e.filter((function(e){return e.phoneInfo}));console.log(t),n.setState({countries:t,loading:!1})},n.onFocus=function(){n.handleCountriesListShow()},n.handleCountriesListShow=function(){n.state.selectedCountry||n.setState({showCountriesList:!0})},n.autoSelectPrefix=function(e){var t=n.state,o=t.countries,a=t.selectedCountryPrefix,r="+".concat(e.slice(0,3));console.log(r);var s=o.filter((function(e){return e.phoneInfo.prefix.includes(r)}));if(r!==a&&s.length>0&&n.setState({showCountriesList:!0,selectedCountry:""}),console.log(s),s.length>0){var c=s[0].code;n.setState({selectedCountryPrefix:r,selectedCountryCode:c.toLowerCase()})}},n.onInputChange=function(e){n.setState({alertMessage:""});var t=e.target.value,o=n.inputValidation(t.slice(1));n.setState({inputValue:"+".concat(o)}),n.autoSelectPrefix(o),n.handleCountriesListShow()},n.inputValidation=function(e){var t=/\d/g;return e.match(t)?e.match(t).join(""):""},n.handleCountryClick=function(e){console.log(e.target);var t=e.target.dataset;n.setState({selectedCountry:t.country,selectedCountryCode:t.code.toLowerCase(),selectedCountryPrefix:t.prefix,selectedCountryMin:t.min,selectedCountryMax:t.max,showCountriesList:!1}),n.state.inputValue<t.prefix&&n.setState({inputValue:t.prefix})},n.handleSubmit=function(e){e.preventDefault();var t=n.state,o=t.selectedCountry,a=t.selectedCountryMin,r=t.selectedCountryMax,s=t.selectedCountryPrefix,c=n.state.inputValue.length,u=+a+s.length,l=+r+s.length;o.length?c>=u&&c<=l?n.setState({showPopUp:!0}):n.setState({alertMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442: \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0434\u043b\u0438\u043d\u043e\u0439 ".concat(l===u?l:"".concat(u," - ").concat(l)," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}):n.setState({alertMessage:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"})},n.onBtnClick=function(e){n.setState({showPopUp:!1}),e&&(n.setState({selectedCountry:"",selectedCountryCode:"",selectedCountryPrefix:"",selectedCountryMin:"",selectedCountryMax:"",inputValue:"+",showMessage:!0}),setTimeout((function(){n.setState({showMessage:!1})}),5e3))},n.renderFlag=function(e){var t="flag flag-".concat(e);return a.a.createElement("div",{className:t})},n.renderDatalist=function(e){var t=n.state.selectedCountryPrefix;return e.filter((function(e){return e.phoneInfo.prefix.includes(t)})).map((function(e){var t=n.renderFlag(e.code.toLowerCase());return a.a.createElement("li",{key:e.id,"data-prefix":e.phoneInfo.prefix,"data-country":e.name,"data-code":e.code,"data-min":e.phoneInfo.minLength,"data-max":e.phoneInfo.maxLength,onClick:function(e){return n.handleCountryClick(e)}},t," ",e.name," (",e.phoneInfo.prefix,")")}))},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getCountries().then(this.onCountriesLoaded)}},{key:"render",value:function(){var e=this,t=this.state,n=t.countries,o=t.selectedCountry,r=t.selectedCountryCode,s=t.loading,c=t.inputValue,u=t.showCountriesList,l=t.showPopUp,i=t.showMessage,d=t.alertMessage,f=r?this.renderFlag(r):null,p=u?a.a.createElement("ul",null,a.a.createElement("li",{onClick:function(){e.setState({showCountriesList:!1})}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0440\u0430\u043d"),this.renderDatalist(n)):null,C=l?a.a.createElement("div",{className:"popUp"},a.a.createElement("p",null,"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?"),a.a.createElement("button",{onClick:function(){return e.onBtnClick(!0)}},"\u0414\u0430"),a.a.createElement("button",{onClick:function(){return e.onBtnClick(!1)}},"\u041d\u0435\u0442")):null,h=i?a.a.createElement("div",{className:"popUp"},a.a.createElement("p",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e")):null;return s?a.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"):a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},a.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 (\u0446\u0438\u0444\u0440\u044b 0-9) \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430."),a.a.createElement("p",{className:"country"},"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0430: ",o),a.a.createElement("input",{type:"tel",list:"countries",value:c,onChange:function(t){return e.onInputChange(t)},onFocus:function(){return e.onFocus()}}),a.a.createElement("span",null,d),a.a.createElement("div",{className:"flagIcon"},f),p,a.a.createElement("button",{type:"submit"},"\u0414\u0430\u043b\u0435\u0435")),C,h)}}]),t}(o.Component));Object(c.b)((function(e){return console.log(e),{form:e.form}}))(x);n(32);var E=function(){return a.a.createElement("div",null,a.a.createElement(x,null))};s.a.render(a.a.createElement(c.a,{store:f},a.a.createElement(E,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.4e228903.chunk.js.map