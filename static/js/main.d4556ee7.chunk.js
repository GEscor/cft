(this.webpackJsonpcft=this.webpackJsonpcft||[]).push([[0],{19:function(e,t,n){e.exports=n(33)},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(4),s=n.n(r),u=n(5),c=n(2),i={countries:[],showCountriesList:!1,selectedCountry:"",selectedCountryCode:"",selectedCountryPrefix:"",selectedCountryMin:"",selectedCountryMax:"",inputValue:"+",loading:!0,error:!1,showPopUp:!1,showMessage:!1,alertMessage:" "},l=Object(c.c)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_FORM":return;default:return e}}}),d=n(12),f=Object(c.d)(l,Object(c.a)(d.a)),p=n(9),C=n.n(p),h=n(13),m=n(14),y=n(15),g=n(17),v=n(16),x=n(18),w=(n(30),n(31),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={countries:[],showCountriesList:!1,selectedCountry:"",selectedCountryCode:"",selectedCountryPrefix:"",selectedCountryMin:"",selectedCountryMax:"",inputValue:"+",loading:!0,error:!1,showPopUp:!1,showMessage:!1,alertMessage:" "},n.getCountries=Object(h.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://koronapay.com/online/api/countries");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch, received ".concat(t.status));case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),n.onCountriesLoaded=function(e){var t=e.filter((function(e){return e.phoneInfo}));n.setState({countries:t,loading:!1})},n.onFocus=function(){n.handleCountriesListShow()},n.handleCountriesListShow=function(){n.state.selectedCountry||n.setState({showCountriesList:!0})},n.autoSelectPrefix=function(e){var t=n.state,a=t.countries,o=t.selectedCountryPrefix,r="+".concat(e.slice(0,3)),s=a.filter((function(e){return e.phoneInfo.prefix.includes(r)}));if(r!==o&&s.length>0&&n.setState({showCountriesList:!0,selectedCountry:""}),s.length>0){var u=s[0].code;n.setState({selectedCountryPrefix:r,selectedCountryCode:u.toLowerCase()})}},n.onInputChange=function(e){n.setState({alertMessage:""});var t=e.target.value,a=n.inputValidation(t.slice(1));n.setState({inputValue:"+".concat(a)}),n.autoSelectPrefix(a),n.handleCountriesListShow()},n.inputValidation=function(e){var t=/\d/g;return e.match(t)?e.match(t).join(""):""},n.handleCountryClick=function(e){var t=e.target.dataset;n.setState({selectedCountry:t.country,selectedCountryCode:t.code.toLowerCase(),selectedCountryPrefix:t.prefix,selectedCountryMin:t.min,selectedCountryMax:t.max,showCountriesList:!1}),n.state.inputValue<t.prefix&&n.setState({inputValue:t.prefix}),n.substitute(t.prefix)},n.substitute=function(e){var t=n.state.inputValue,a=e.length;console.log(t.slice(a));var o=e+t.slice(a);n.setState({inputValue:o})},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.selectedCountry,o=t.selectedCountryMin,r=t.selectedCountryMax,s=t.selectedCountryPrefix,u=n.state.inputValue.length,c=+o+s.length,i=+r+s.length;a.length?u>=c&&u<=i?n.setState({showPopUp:!0}):n.setState({alertMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442: \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0434\u043b\u0438\u043d\u043e\u0439 ".concat(i===c?i:"".concat(c," - ").concat(i)," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}):n.setState({alertMessage:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"})},n.onBtnClick=function(e){n.setState({showPopUp:!1}),e&&(n.setState({selectedCountry:"",selectedCountryCode:"",selectedCountryPrefix:"",selectedCountryMin:"",selectedCountryMax:"",inputValue:"+",showMessage:!0}),setTimeout((function(){n.setState({showMessage:!1})}),5e3))},n.renderFlag=function(e){var t="flag flag-".concat(e);return o.a.createElement("div",{className:t})},n.renderDatalist=function(e){var t=n.state.selectedCountryPrefix;return e.filter((function(e){return e.phoneInfo.prefix.includes(t)})).map((function(e){var t=n.renderFlag(e.code.toLowerCase());return o.a.createElement("li",{key:e.id,"data-prefix":e.phoneInfo.prefix,"data-country":e.name,"data-code":e.code,"data-min":e.phoneInfo.minLength,"data-max":e.phoneInfo.maxLength,onClick:function(e){return n.handleCountryClick(e)}},t," ",e.name," (",e.phoneInfo.prefix,")")}))},n}return Object(x.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getCountries().then(this.onCountriesLoaded)}},{key:"render",value:function(){var e=this,t=this.state,n=t.countries,a=t.selectedCountry,r=t.selectedCountryCode,s=t.loading,u=t.inputValue,c=t.showCountriesList,i=t.showPopUp,l=t.showMessage,d=t.alertMessage,f=r?this.renderFlag(r):null,p=c?o.a.createElement("ul",null,o.a.createElement("li",{onClick:function(){e.setState({showCountriesList:!1})}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0440\u0430\u043d"),this.renderDatalist(n)):null,C=i?o.a.createElement("div",{className:"popUp"},o.a.createElement("p",null,"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?"),o.a.createElement("button",{onClick:function(){return e.onBtnClick(!0)}},"\u0414\u0430"),o.a.createElement("button",{onClick:function(){return e.onBtnClick(!1)}},"\u041d\u0435\u0442")):null,h=l?o.a.createElement("div",{className:"popUp"},o.a.createElement("p",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e")):null;return s?o.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"):o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 (\u0446\u0438\u0444\u0440\u044b 0-9) \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430."),o.a.createElement("p",{className:"country"},"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0430: ",a),o.a.createElement("input",{type:"tel",list:"countries",value:u,onChange:function(t){return e.onInputChange(t)},onFocus:function(){return e.onFocus()}}),o.a.createElement("span",null,d),o.a.createElement("div",{className:"flagIcon"},f),p,o.a.createElement("button",{type:"submit"},"\u0414\u0430\u043b\u0435\u0435")),C,h)}}]),t}(a.Component));Object(u.b)((function(e){return{form:e.form}}))(w);n(32);var E=function(){return o.a.createElement("div",null,o.a.createElement(w,null))};s.a.render(o.a.createElement(u.a,{store:f},o.a.createElement(E,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.d4556ee7.chunk.js.map